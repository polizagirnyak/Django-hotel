{% extends 'admin_panel/base.html' %}
{% load static %}


{% block content %}
<div class="table-header">
    <h1>–°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ –æ—Ç–µ–ª—è</h1>
    <a href="{% url 'room_create' %}" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä</a>
</div>

<div class="table-container">
    <table class="rooms-table">
        <thead>
            <tr>
                <th class="col-room-number">–ù–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã</th>
                <th class="col-room-type">–¢–∏–ø –Ω–æ–º–µ—Ä–∞</th>
                <th class="col-status">–°—Ç–∞—Ç—É—Å</th>
                <th class="col-floor">–≠—Ç–∞–∂</th>
                <th class="col-features">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</th>
                <th class="col-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for room in rooms %}
            <tr class="room-row">
                <td class="room-number">
                    <span class="room-number-badge">{{ room.room_number }}</span>
                </td>
                <td class="room-type">
                    <div class="room-type-info">
                        <strong>{{ room.room_type.name }}</strong>
                        <span class="room-price">{{ room.room_type.price_per_night }} —Ä—É–±./–Ω–æ—á—å</span>
                    </div>
                </td>
                <td class="status-cell">
                    <span class="status-badge status-{{ room.status }}">
                        {{ room.get_status_display }}
                    </span>
                </td>
                <td class="floor-cell">
                    <span class="floor-badge">{{ room.floor }} —ç—Ç–∞–∂</span>
                </td>
                <td class="features-cell">
                    {% if room.features %}
                        <div class="features-text">{{ room.features }}</div>
                    {% else %}
                        <span class="no-features">‚Äî</span>
                    {% endif %}
                </td>
                <td class="actions-cell">
                    <div class="action-buttons">
                        <a href="{% url 'room_edit' room.pk %}" class="btn-edit" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </a>
                        <a href="{% url 'room_delete' room.pk %}" class="btn-delete" title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="no-rooms">
                    <div class="empty-state">
                        <div class="empty-icon">üè®</div>
                        <h3>–ù–æ–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –Ω–æ–º–µ—Ä –≤ —Å–∏—Å—Ç–µ–º—É</p>
                        <a href="{% url 'room_create' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="table-stats">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ total_rooms }}</div>
            <div class="stat-label">–í—Å–µ–≥–æ –Ω–æ–º–µ—Ä–æ–≤</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ available_rooms }}</div>
            <div class="stat-label">–°–≤–æ–±–æ–¥–Ω–æ</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ occupied_rooms }}</div>
            <div class="stat-label">–ó–∞–Ω—è—Ç–æ</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ maintenance_rooms }}</div>
            <div class="stat-label">–ù–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏</div>
        </div>
    </div>
</div>

<!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö -->
{% if integrity_issues %}
<div class="alert alert-warning">
    <h5>‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏:</h5>
    <ul class="mb-0">
        {% for issue in integrity_issues %}
        <li>{{ issue }}</li>
        {% endfor %}
    </ul>
    <div class="mt-2">
        <small>–ò—Å–ø—Ä–∞–≤—å—Ç–µ —Å—Ç–∞—Ç—É—Å—ã –∫–æ–º–Ω–∞—Ç –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.</small>
    </div>
</div>
{% endif %}
{% endblock %}