{% extends 'admin_panel/base.html' %}
{% load static %}


{% block content %}
<div class="dashboard-container">
    <div class="table-header">
        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏</h1>
        <div class="header-actions">
            <a href="{% url 'booking_create_with_customer' %}" class="btn btn-primary">
                + –ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            </a>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ total_bookings }}</div>
            <div class="stat-label">–í—Å–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ active_bookings }}</div>
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ today_checkins }}</div>
            <div class="stat-label">–ó–∞–µ–∑–¥—ã —Å–µ–≥–æ–¥–Ω—è</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ today_checkouts }}</div>
            <div class="stat-label">–í—ã–µ–∑–¥—ã —Å–µ–≥–æ–¥–Ω—è</div>
        </div>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
    <div class="filters-card">
        <form method="get" class="filters-form">
            <input type="hidden" name="sort" value="{{ sort_by }}">

            <div class="filters-grid">
                <div class="filter-group">
                    <label for="search" class="filter-label">–ü–æ–∏—Å–∫</label>
                    <input type="text" name="search" id="search" class="form-control"
                           value="{{ search_query }}" placeholder="–ò–º—è, —Ñ–∞–º–∏–ª–∏—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –Ω–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã...">
                </div>
                <div class="filter-group">
                    <label for="status" class="filter-label">–°—Ç–∞—Ç—É—Å</label>
                    <select name="status" id="status" class="form-control">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        {% for status_value, status_name in booking_statuses %}
                        <option value="{{ status_value }}" {% if status_filter == status_value %}selected{% endif %}>
                            {{ status_name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group">
                    <label for="date" class="filter-label">–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–∏–æ–¥</label>
                    <select name="date" id="date" class="form-control">
                        <option value="">–í—Å–µ –¥–∞—Ç—ã</option>
                        <option value="today" {% if date_filter == 'today' %}selected{% endif %}>–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="tomorrow" {% if date_filter == 'tomorrow' %}selected{% endif %}>–ó–∞–≤—Ç—Ä–∞</option>
                        <option value="this_week" {% if date_filter == 'this_week' %}selected{% endif %}>–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</option>
                        <option value="upcoming" {% if date_filter == 'upcoming' %}selected{% endif %}>–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</option>
                    </select>
                </div>
            </div>

            <div class="filters-grid period-grid">
                <div class="filter-group">
                    <label for="date_from" class="filter-label">–ó–∞–µ–∑–¥ —Å</label>
                    <input type="date" name="date_from" id="date_from" class="form-control" value="{{ date_from }}">
                </div>
                <div class="filter-group">
                    <label for="date_to" class="filter-label">–í—ã–µ–∑–¥ –ø–æ</label>
                    <input type="date" name="date_to" id="date_to" class="form-control" value="{{ date_to }}">
                </div>
                <div class="filter-actions">
                    <button type="submit" class="btn btn-primary">üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    <a href="{% url 'booking_list' %}" class="btn btn-secondary">‚ùå –°–±—Ä–æ—Å–∏—Ç—å</a>
                </div>
            </div>
        </form>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π -->
    <div class="table-container">
        <table class="bookings-table">
            <thead>
                <tr>
                    <!-- ID -->
                    <th class="col-id">
                        {% if sort_by == 'id' %}
                            <a href="?sort=-id&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">ID <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-id' %}
                            <a href="?sort=id&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">ID <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=id&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">ID <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –ö–ª–∏–µ–Ω—Ç -->
                    <th class="col-customer">
                        {% if sort_by == 'customer__last_name' %}
                            <a href="?sort=-customer__last_name&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–ª–∏–µ–Ω—Ç <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-customer__last_name' %}
                            <a href="?sort=customer__last_name&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–ª–∏–µ–Ω—Ç <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=customer__last_name&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–ª–∏–µ–Ω—Ç <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –ö–æ–º–Ω–∞—Ç–∞ -->
                    <th class="col-room">
                        {% if sort_by == 'room__room_number' %}
                            <a href="?sort=-room__room_number&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–æ–º–Ω–∞—Ç–∞ <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-room__room_number' %}
                            <a href="?sort=room__room_number&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–æ–º–Ω–∞—Ç–∞ <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=room__room_number&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–ö–æ–º–Ω–∞—Ç–∞ <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –î–∞—Ç—ã -->
                    <th class="col-dates">
                        {% if sort_by == 'check_in_date' %}
                            <a href="?sort=-check_in_date&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–î–∞—Ç—ã <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-check_in_date' %}
                            <a href="?sort=check_in_date&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–î–∞—Ç—ã <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=check_in_date&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–î–∞—Ç—ã <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –ù–æ—á–µ–π ‚Äî –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ, –±–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ -->
                    <th class="col-nights"><span class="sort-link-plain">–ù–æ—á–µ–π</span></th>

                    <!-- –°—Ç–æ–∏–º–æ—Å—Ç—å -->
                    <th class="col-price">
                        {% if sort_by == 'total_price' %}
                            <a href="?sort=-total_price&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–æ–∏–º–æ—Å—Ç—å <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-total_price' %}
                            <a href="?sort=total_price&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–æ–∏–º–æ—Å—Ç—å <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=total_price&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–æ–∏–º–æ—Å—Ç—å <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –°—Ç–∞—Ç—É—Å -->
                    <th class="col-status">
                        {% if sort_by == 'status' %}
                            <a href="?sort=-status&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–∞—Ç—É—Å <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-status' %}
                            <a href="?sort=status&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–∞—Ç—É—Å <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=status&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°—Ç–∞—Ç—É—Å <span class="sort-arrow muted">‚áÖ</span></a>
                        {% endif %}
                    </th>

                    <!-- –°–æ–∑–¥–∞–Ω–æ -->
                    <th class="col-created">
                        {% if sort_by == 'created_at' %}
                            <a href="?sort=-created_at&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°–æ–∑–¥–∞–Ω–æ <span class="sort-arrow">‚ñ≤</span></a>
                        {% elif sort_by == '-created_at' %}
                            <a href="?sort=created_at&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°–æ–∑–¥–∞–Ω–æ <span class="sort-arrow">‚ñº</span></a>
                        {% else %}
                            <a href="?sort=-created_at&search={{ search_query }}&status={{ status_filter }}&date={{ date_filter }}&date_from={{ date_from }}&date_to={{ date_to }}" class="sort-link">–°–æ–∑–¥–∞–Ω–æ <span class="sort-arrow">‚ñº</span></a>
                        {% endif %}
                    </th>

                    <th class="col-actions"><span class="sort-link-plain">–î–µ–π—Å—Ç–≤–∏—è</span></th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr class="booking-row {% if booking.status == 'checked_in' %}row-checked-in{% elif booking.status == 'cancelled' %}row-cancelled{% endif %}">
                    <td class="booking-id"><strong>#{{ booking.id }}</strong></td>
                    <td class="customer-info">
                        <div class="customer-name">{{ booking.customer.first_name }} {{ booking.customer.last_name }}</div>
                        <div class="customer-contacts">
                            <small>üìû {{ booking.customer.phone }}</small>
                            <small>üìß {{ booking.customer.email }}</small>
                        </div>
                    </td>
                    <td class="room-info">
                        <div class="room-number">{{ booking.room.room_number }}</div>
                        <div class="room-type">{{ booking.room.room_type.name }}</div>
                        <div class="room-floor">{{ booking.room.floor }} —ç—Ç–∞–∂</div>
                    </td>
                    <td class="dates-info">
                        <div class="check-in"><strong>–ó–∞–µ–∑–¥:</strong> {{ booking.check_in_date|date:"d.m.Y" }}</div>
                        <div class="check-out"><strong>–í—ã–µ–∑–¥:</strong> {{ booking.check_out_date|date:"d.m.Y" }}</div>
                    </td>
                    <td class="nights-count">{{ booking.nights }}</td>
                    <td class="price-info">
                        <div class="total-price">{{ booking.total_price }} —Ä—É–±.</div>
                        <div class="price-per-night">{{ booking.room.room_type.price_per_night }} —Ä—É–±./–Ω–æ—á—å</div>
                    </td>
                    <td class="status-cell">
                        <span class="status-badge status-{{ booking.status }}">{{ booking.get_status_display }}</span>
                    </td>
                    <td class="created-date">{{ booking.created_at|date:"d.m.Y H:i" }}</td>
                    <td class="actions-cell">
                        <div class="action-buttons">
                            <div class="status-actions">
                                {% if booking.status == 'awaiting_payment' %}
                                <form method="post" action="{% url 'booking_status_update' booking.pk 'confirmed' %}" class="action-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-status btn-confirm" title="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å">‚úì</button>
                                </form>
                                {% endif %}
                                {% if booking.status == 'confirmed' %}
                                <form method="post" action="{% url 'booking_status_update' booking.pk 'checked_in' %}" class="action-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-status btn-checkin" title="–ó–∞—Å–µ–ª–∏—Ç—å">üè®</button>
                                </form>
                                {% endif %}
                                {% if booking.status == 'checked_in' %}
                                <form method="post" action="{% url 'booking_status_update' booking.pk 'checked_out' %}" class="action-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-status btn-checkout" title="–í—ã—Å–µ–ª–∏—Ç—å">üß≥</button>
                                </form>
                                {% endif %}
                                {% if booking.status in 'confirmed,awaiting_payment,checked_in' %}
                                <form method="post" action="{% url 'booking_status_update' booking.pk 'cancelled' %}" class="action-form">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-status btn-cancel" title="–û—Ç–º–µ–Ω–∏—Ç—å">‚ùå</button>
                                </form>
                                {% endif %}
                            </div>
                            <div class="main-actions">
                                <a href="{% url 'booking_edit' booking.pk %}" class="btn-action btn-edit" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
                                <a href="{% url 'booking_delete' booking.pk %}" class="btn-action btn-delete" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</a>
                            </div>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="9" class="no-bookings">
                        <div class="empty-state">
                            <div class="empty-icon">üìÖ</div>
                            <h3>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                            <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
                            <a href="{% url 'booking_create_with_customer' %}" class="btn btn-primary">+ –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if bookings.has_other_pages %}
    <div class="pagination">
        {% if bookings.has_previous %}
        <a href="?page={{ bookings.previous_page_number }}&sort={{ sort_by }}{% if search_query %}&search={{ search_query }}{% endif %}{% if status_filter %}&status={{ status_filter }}{% endif %}{% if date_filter %}&date={{ date_filter }}{% endif %}{% if date_from %}&date_from={{ date_from }}{% endif %}{% if date_to %}&date_to={{ date_to }}{% endif %}" class="page-link">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}
        <span class="current-page">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ bookings.number }} –∏–∑ {{ bookings.paginator.num_pages }}</span>
        {% if bookings.has_next %}
        <a href="?page={{ bookings.next_page_number }}&sort={{ sort_by }}{% if search_query %}&search={{ search_query }}{% endif %}{% if status_filter %}&status={{ status_filter }}{% endif %}{% if date_filter %}&date={{ date_filter }}{% endif %}{% if date_from %}&date_from={{ date_from }}{% endif %}{% if date_to %}&date_to={{ date_to }}{% endif %}" class="page-link">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
        {% endif %}
    </div>
    {% endif %}
</div>

<style>
    .dashboard-container { max-width: 1400px; margin: 0 auto; padding: 2rem 1rem; }
    .table-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .table-header h1 { color: #2c3e50; font-size: 2.25rem; font-weight: 700; margin: 0; }
    .header-actions { display: flex; gap: 1rem; }

    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
    .stat-card { background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); text-align: center; transition: transform 0.3s ease; }
    .stat-card:hover { transform: translateY(-3px); }
    .stat-number { font-size: 2.5rem; font-weight: 700; color: #667eea; margin-bottom: 0.5rem; }
    .stat-label { color: #7f8c8d; font-size: 0.9rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }

    .filters-card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 2rem; }
    .filters-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 1rem; align-items: end; margin-bottom: 1rem; }
    .period-grid { grid-template-columns: 1fr 1fr auto; margin-bottom: 0; padding-top: 1rem; border-top: 1px solid #f1f3f4; }
    .filter-group { display: flex; flex-direction: column; }
    .filter-label { color: #2c3e50; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.9rem; }
    .form-control { padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 6px; font-size: 1rem; transition: all 0.3s ease; }
    .form-control:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
    .filter-actions { display: flex; gap: 0.5rem; align-items: flex-end; }

    .table-container { background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); overflow: hidden; margin-bottom: 2rem; }
    .bookings-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    .bookings-table thead { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

    /* –í–∞–∂–Ω–æ: th –±–µ–∑ padding, –æ–Ω –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å—Å—ã–ª–∫–∏ */
    .bookings-table th { padding: 0; color: white; font-weight: 600; text-align: left; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; }

    .sort-link {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 1.25rem 0.75rem;
        color: white;
        text-decoration: none;
        white-space: nowrap;
        transition: background 0.2s ease;
    }
    .sort-link:hover { background: rgba(255,255,255,0.15); color: white; }
    .sort-link-plain { display: block; padding: 1.25rem 0.75rem; white-space: nowrap; }
    .sort-arrow { font-size: 0.8rem; }
    .sort-arrow.muted { opacity: 0.35; }

    .bookings-table tbody tr { border-bottom: 1px solid #f1f3f4; transition: background 0.2s ease; }
    .bookings-table tbody tr:hover { background-color: #f8f9fa; }
    .bookings-table tbody tr.row-checked-in { background-color: #f0f9ff; }
    .bookings-table tbody tr.row-cancelled { background-color: #fef2f2; opacity: 0.7; }
    .bookings-table td { padding: 1rem 0.75rem; vertical-align: top; }

    .booking-id { font-weight: 600; color: #2c3e50; }
    .customer-name { font-weight: 600; color: #2c3e50; margin-bottom: 0.25rem; }
    .customer-contacts { display: flex; flex-direction: column; gap: 0.1rem; }
    .customer-contacts small { color: #7f8c8d; font-size: 0.8rem; }
    .room-number { font-weight: 700; color: #2c3e50; font-size: 1.1rem; }
    .room-type { color: #667eea; font-weight: 500; font-size: 0.85rem; }
    .room-floor { color: #7f8c8d; font-size: 0.8rem; }
    .dates-info { font-size: 0.85rem; }
    .check-in, .check-out { margin-bottom: 0.25rem; }
    .nights-count { text-align: center; font-weight: 600; color: #2c3e50; font-size: 1.1rem; }
    .total-price { font-weight: 700; color: #4CAF50; font-size: 1rem; }
    .price-per-night { color: #7f8c8d; font-size: 0.8rem; }

    .status-badge { padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: inline-block; }
    .status-confirmed { background: #e3f2fd; color: #1976d2; }
    .status-checked_in { background: #e8f5e8; color: #2e7d32; }
    .status-checked_out { background: #f3e5f5; color: #7b1fa2; }
    .status-awaiting_payment { background: #fff3e0; color: #ef6c00; }
    .status-cancelled { background: #ffebee; color: #c62828; }

    .actions-cell { min-width: 150px; }
    .action-buttons { display: flex; flex-direction: column; gap: 0.5rem; }
    .status-actions { display: flex; gap: 0.25rem; flex-wrap: wrap; }
    .main-actions { display: flex; gap: 0.25rem; justify-content: center; }
    .action-form { display: inline; }
    .btn-status, .btn-action { padding: 0.4rem; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; }
    .btn-confirm { background: #e3f2fd; color: #1976d2; } .btn-confirm:hover { background: #1976d2; color: white; }
    .btn-checkin { background: #e8f5e8; color: #2e7d32; } .btn-checkin:hover { background: #2e7d32; color: white; }
    .btn-checkout { background: #f3e5f5; color: #7b1fa2; } .btn-checkout:hover { background: #7b1fa2; color: white; }
    .btn-cancel { background: #ffebee; color: #c62828; } .btn-cancel:hover { background: #c62828; color: white; }
    .btn-edit { background: #e3f2fd; color: #1976d2; } .btn-edit:hover { background: #1976d2; color: white; }
    .btn-delete { background: #ffebee; color: #c62828; } .btn-delete:hover { background: #c62828; color: white; }

    .no-bookings { text-align: center; padding: 4rem 2rem !important; }
    .empty-state { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
    .empty-icon { font-size: 4rem; opacity: 0.7; }
    .empty-state h3 { color: #7f8c8d; margin: 0; font-weight: 500; }
    .empty-state p { color: #bdc3c7; margin: 0; }

    .pagination { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2rem; }
    .page-link { padding: 0.5rem 1rem; background: white; color: #667eea; text-decoration: none; border-radius: 6px; border: 1px solid #e9ecef; transition: all 0.3s ease; }
    .page-link:hover { background: #667eea; color: white; }
    .current-page { color: #7f8c8d; font-weight: 500; }

    .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; text-decoration: none; text-align: center; transition: all 0.3s ease; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem; }
    .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; box-shadow: 0 4px 15px rgba(102,126,234,0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102,126,234,0.4); }
    .btn-secondary { background: white; color: #667eea; border: 2px solid #667eea; }
    .btn-secondary:hover { background: #667eea; color: white; }

    @media (max-width: 768px) {
        .table-header { flex-direction: column; gap: 1rem; text-align: center; }
        .filters-grid { grid-template-columns: 1fr; gap: 1rem; }
        .period-grid { grid-template-columns: 1fr; }
        .filter-actions { justify-content: center; }
        .table-container { overflow-x: auto; }
        .bookings-table { min-width: 1000px; }
        .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 480px) {
        .stats-grid { grid-template-columns: 1fr; }
        .table-header h1 { font-size: 1.75rem; }
    }
</style>
{% endblock %}
 